// @import 'init';

// Half circle: 190px / 95px
// Needle: 112px x 12px
// Bottom of needle: 12 x 6
// Maxx
// ====
// Ultimate 300/300: 100%
// Ultimate 200/300: 66%
// Ultimate 100/300: 33%
// Extreme 50/300  : 16.6%
// Non-maxx
// ========
// Ultimate 50/50  : 100%
// Extreme 30/50   : 60%
// Turbo 20/50     : 40%
// Standard 15/50  : 30%;
$needle-height: 112px;
$needle-top-height: 106px;
$needle-width: 12px;
$needle-color: #666;
$circle-radius: 95px;
$circle-diameter: $circle-radius * 2;
$circle-color-bg: #f3f6f9;
$circle-color-bg: #e0f3fc;
$circle-color-speed: #0590dd;
$circle-color-cover: #fff;
$dial-stroke-width: 30px;
$start-pos: -180deg;

@mixin animation {
	transform-origin: bottom center;
	animation-name: to-100;
	animation-duration: 1s;
	animation-iteration-count: infinite;
	animation-timing-function: ease-out;
}

.speedometer {
	> .wrap {
		width: $circle-diameter;
		height: $circle-radius;
		position: relative;
		margin: 20px;
	}

	// contains progress bar and need
	.dial {
		height: $circle-radius;
		height: $circle-radius;
	}

	// needle is a css triangle above a css half-circle
	.needle {
		position: absolute;
		left: 0;
		right: 0;
		top: $circle-radius - $needle-height;
		width: $needle-width;
		margin: 0 auto;

		.inner {
			height: $needle-height;
			width: $needle-width;
			position: relative;
			transform: rotate(90deg);
			transform-origin: bottom center;
		}

		.top,
		.bottom {
			position: absolute;
		}

		// upper triangle
		.top {
			top: 0;
			left: 0;
			width: 0;
			height: 0;
			border-style: solid;
			border-width: 0 ($needle-width / 2) $needle-top-height ($needle-width / 2);
			border-color: transparent transparent $needle-color transparent;
		}

		// lower half circle
		.bottom {
			height: $needle-width / 2;
			width: $needle-width;
			border-radius: 0 0 $circle-diameter $circle-diameter;
			background-color: $needle-color;
			margin: 0 auto;
			bottom: 1px;
		}
	}

	// container/clipping mask for half circles
	.bar {
		position: relative;
		overflow: hidden;
		height: $circle-radius;
	}

	.half-circle {
		height: $circle-radius;
		width: $circle-diameter;
		border-radius: $circle-diameter $circle-diameter 0 0;
		margin: 0 auto;
		position: absolute;
		left: 0;
		right: 0;
		top: 0;
		transform-origin: bottom center;
	}

	.half-circle-speed {
		background-color: $circle-color-speed;
	}

	.half-circle-bg {
		background-color: $circle-color-bg;
	}

	.half-circle-cover {
		background-color: $circle-color-cover;
		height: $circle-radius - $dial-stroke-width;
		width: $circle-diameter - $dial-stroke-width * 2;
		border-radius: $circle-diameter $circle-diameter 0 0;
		background: $circle-color-cover;
		margin: 0 auto;
		top: $dial-stroke-width;
	}

	.animated {
		@include animation;
	}
}

$percentages: 100, 66, 60, 40, 33, 30, 16;

@each $percent in $percentages {
	.speedometer-#{$percent} {
		.animated {
			animation-name: to-#{$percent};
		}
	}
}

@keyframes to-100 {
	0% {
		transform: rotate($start-pos);
	}

	100% {
		transform: rotate($start-pos + 180deg);
	}
}

@keyframes to-66 {
	0% {
		transform: rotate($start-pos);
	}

	100% {
		transform: rotate($start-pos + 180deg * 0.666);
	}
}

@keyframes to-60 {
	0% {
		transform: rotate($start-pos);
	}

	100% {
		transform: rotate($start-pos + 180deg * 0.6);
	}
}

@keyframes to-40 {
	0% {
		transform: rotate($start-pos);
	}

	100% {
		transform: rotate($start-pos + 180deg * 0.4);
	}
}

@keyframes to-33 {
	0% {
		transform: rotate($start-pos);
	}

	100% {
		transform: rotate($start-pos + 180deg * 0.333);
	}
}

@keyframes to-30 {
	0% {
		transform: rotate($start-pos);
	}

	100% {
		transform: rotate($start-pos + 180deg * 0.3);
	}
}

@keyframes to-16 {
	0% {
		transform: rotate($start-pos);
	}

	100% {
		transform: rotate($start-pos + 180deg * 0.166);
	}
}

// @import 'controls';
